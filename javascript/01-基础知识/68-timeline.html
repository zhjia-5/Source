<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>js时间线</title>
	</head>
	<body>
		<!-- 
		 JavaScript之js加载时间线:在js加载开始的时候，浏览器会 记录js执行的这段过程。
			1，创建Document对象，开始解析web页面，解析HTML元素和他们的文本内容后添加
				Element对象和Text节点到文本中。这个阶段Document.readyState = 'loading';
				
			2，遇到link外部css，创建线程加载，并继续解析文档。
			
			3,遇到script外部js，并且没有设置async，defer，浏览器加载，并阻塞，等待js加载
				完成并执行该脚本，然后继续解析文档。	
		 
			4，遇到script外部js，并且设置有async，defer浏览器创建线程加载，并继续解析文档，
				对于async属性的脚本，脚本加载完成后立即执行（异步禁止使用document.write()）。
				
			5，遇到img标签等，先正常解析dom结构，然后浏览器异步加载src，并继续解析文档。	
		 
			6，当文档解析完成，document.readyState = "interactive"；（interactive:活跃的，动态的）
				即建立好domTree。
			
			7，文档解析完成后，所有设置有defer的脚本会按照顺序执行。
			
			8，当文档解析完成之后，document对象触发DOMContentLoaded事件，这也标志着程序执行
				从同步脚本执行阶段，转化为事件驱动阶段。
			
			9，当所有saync的脚本加载完成并执行后，img等加载完成后，
				document.readyState = "complete" window对象触发load事件
			
			10，从此，页面以异步响应方式处理用户输入，网络事件等。
			
			以上十个步骤是js执行的全部步骤，上面我们提到了document。readyState的三种状态，在这里我们可以验证一下
		 -->
		<div style="width: 100px;height: 100px;background-color: #999999;"></div>
		
		<script type="text/javascript">
			console.log(document.readyState);			
			
			window.onload = function(){
				document.writeln('window.load会清空前面所有的文档流。此处不显示div内容')
			}
			
			document.onreadystatechange = function(){//当document状态发生改变时
				console.log(document.readyState);//interactive  complete
			}
			
		</script>
		
	</body>
</html>
