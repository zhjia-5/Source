<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>闭包</title>
	</head>
	<body>
		<script type="text/javascript">
		/* 	闭包: 
				内部函数被保存到外部时,将会生成闭包。
				闭包会导致原有作用域链不释放,造成内存泄露。
			
			闭包的作用：
				实现公有变量：
					eg:函数累加器
				可以做缓存（存储结构）：
					eg:eater
				可以实现封装，属性私有化：
					eg:Person();
				模块化开发，防止污染全局变量
				
		 */
		// 图解：闭包（demo11）.png
			function a(){
				var aaa = 123;
				function b(){
					var bbb = 234;
					document.write(aaa);
				}
				return b;
			}
			var demo = a();
			demo();//打印结果：123	
			
			/* // 函数累加器演示：
			function add(){
				var count = 0;
				function demo(){
					count ++;
					console.log(count);
				}
				return demo;
			}
			var counter = add();
			counter();// 结果：1；每调用一次count就累加一次
			counter();// 结果：2；
			counter();// 结果：3；
			counter();// 结果：4； */
			
			// 缓存（存储结构）演示：
			/* function test(){			
				var num = 100;			
				function a(){			
					num ++;				
					console.log(num);	
				}						
				function b(){			
					num --;				
					console.log(num);	
				}						
				return [a,b];			
			}							
			var myArr = test();			
			myArr[0]();	//结果：101				
			myArr[1]();	//结果：100				
			 */
			/* test	defined	test.[[scope]]	0 : GO
			
			test	doing	test.[[scope]]	0 : AO
							1 : GO
			
			a	defined	a.[[scope]]	0 : AO
							1 : GO
			
			a	doing	a.[[scope]]	0 : aAO
							1 : tAO
							2 : GO	
			
			b	defined	b.[[scope]]	0 : aAO
							1 : tAO
							2 : GO
			
			b	doing	b.[[scope]]	0 : bAO
							1 : aAO
							2 : tAO
							3 : GO				
			test    num=100
			a	num=101
			b	num=100	 */
		</script>
	</body>
</html>
