<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /* 
      async ：
       使用async修饰的函数返回的函数必须是一个Promise

      await:
        在async 函数中使用，被修饰的返回结果一定是 Promise 对象。
        用于修饰函数（无论是函数字面量还是函数表达式），放置在函数最开始的位置，
        表示等到被修饰的函数的返回状态进入已决。
        语法： const result = await test();
    
      如果await后面的表达式不是一个Promise，则会将其使用Promise.resolve包装后
      按照规则运行。

      
     */

    // 演示一： 
    async function test() {
      if (Math.random() < 0.5) {
        return "小于0.5";  //相当于resolve("小于0.5")
      } else {
        throw "大于0.5"; //相当于reject("大于0.5")
      }
    }

    // 演示二 ：
    function test2() {
      return new Promise((resolve, reject) => {
        if (Math.random() < 0.5) {
          resolve("小于0.5");
        } else {
          reject("大于0.5");
        }
      });
    }

    //  两个函数都是返回一个Promise对象，是等效的。
    const pro1 = test();
    pro1.then(data => {
      console.log(data);
    }, err => {
      console.log(err);
    })


    const pro2 = test2();
    pro2.then(data=>{
      console.log(data);
    },err=>{
      console.log(err);
    })

    console.log(pro1,pro2);//都是Promise对象
  </script>
</body>

</html>